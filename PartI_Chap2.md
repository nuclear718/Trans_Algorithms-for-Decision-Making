## 機率推理 (Probabilistic Reasoning)

要達成理性的決策，我們需要適當的推理來處理不確定性以及所設定的問題目標。在能力上我們總是遭遇實務上的困難以及理論限制，這都是產生不確定性的來源，並且影響我們對特定事件的預測。

###### 前言的部分未完成，待續......


### 第二章 統計表達 (Representation)

**2.1章 信度與機率 (2.1 Degrees of Belief and Probability)**

當所處理的問題具有不確定性時，比較不同的問題陳述以及所相關的可能性，是非常重要的方法。我們需要憑藉著可能性比較不同的陳述例如: 
與陳述B比起來，陳述A具有較高的可能性。
陳述A若為某敘述:「我的驅動器故障」，而陳述B為另一敘述:「我的感測器故障」。那麼基於可能能性分析的結論，我們就可以寫下一個描述可能性的表達式即:<br>

A>B <br>
P(A)>P(B) 等價於(若且唯若) A>B <br>
P(A)=P(B) 等價於(若且唯若) A~B <br>

若我們對已經建立的「可能性表達式」中的機率P具有統計上的前提假設(例如:先驗知識)，那麼就必須符合基本的統計公理。例如，當我們已經確定事件A會發生，那麼 P(A)的機率值就必然等於一，若我們相信事件A是不可能發生的，則 P(A)即為零。所謂A的「不確定性」若要用一個數值表達，就是介於零與一這兩個極端之間的值。<br>

**2.2章 機率分布 (2.2 Probability Distributions)**
描述各種不同事件的發生機率，我們稱之為機率分布。機率分布有很多種形式，基於可能發生事件的型態種類可以分成兩大類: 離散以及連續機率分布。<br>
(譯者: 舉例，用來描述明日天氣機率，因為只有三種可能:晴、雨或是陰天。只有這三種離散的狀態，故描述其機率稱之為離散機率分布。但另舉一例，如果描述的是明日的可能氣溫，由於氣溫值是連續，故描述可能的氣溫分布就會是連續機率分布)

&#160;   2.2.1章  離散統計分布 (2.2.1 Discrete Probability Distributions)
對一系列非連續事件(離散隨機變數)的機率描述，稱之為離散機率分布。在機率論中，機率質量函數（probability mass function）即是用來表達各事件的發生機率值。
進一步舉例:
假如，我們有一個隨機變數X，這個變數的值，每一次都有可能是n個(有限個)數中的其中一個。(1~n 個數值中的其中一個，我們用標點符號(冒號)「:」來描述這個數值涵蓋的範圍即 1:n ) 註1.
我們用P(X=1)、P(X=2)、P(X=3)、、、、、P(X=n)來表達X可能是某一特定值的機率，

在這裡我們可以用上第一個統計基本公理，這個公理限制住所有事件機率的總和必須為一。而任一個特定事件的機率值，必定介於「大於等於零」以及「小於等於一」這個數值範圍內。

∑ P(X = i) = 1
i=1

註1:為了簡化因此經常以標點符號冒號來描述數值範圍，也有人使用比較繁瑣的表達方式如[1..n]。當我們處理向量時，也經常用[a:b]=[a-th elements : b-th elements]或者處理矩陣時以 [a:b]=[row-th number : coulmn-th number]來對向量、矩陣的元素進行索引。(這一類的常見表達習慣，有時被運算類的程式語言繼承如: Julia and MATLAB)


&#160;   2.2.2章  連續統計分布 (2.2.2 Continuous Probability Distributions)

**2.3章 聯合機率分布 (2.3 Joint Distributions)**
處理單一隨機變數的機率分布，我們稱為單變數機率分布。當我們的問題牽涉到多個隨機變數時，需要透過聯合機率分布表達多個隨機變數的機率值。聯合機率分布是一種多變數機率分布。
舉例，有兩個離算的隨機變數分別為 X 及 Y，其聯合機率分布表達為P(X，Y)。當X=Xa、Y=Yb，則P(Xa，Yb)為這兩個特定值同時出現的機率。
根據一個已知的聯合機率分布，我們可以計算其邊際機率分布(marginal distribution)。計算方式，是將聯合機率分布的其他變數發生可能總和，僅留下單一變數，此單一變數即為該聯合機率對次特定變數的邊際機率分布，這個特性又稱為全機率法則(law of total probability:)
P(x) = ∑P(x, y)
請讀者特別注意，這個基本觀念在往後將會貫穿本書。<br>
真實世界中的問題往往牽涉到多個變數，這些變數之間彼此關係可能很複雜，因此思考其決策過程，通常需要根據其聯合機率分布進行適當推理。而聯合機率分布，大抵上也根據其變數的連續或離散性而被分為此兩大類。

&#160;   2.3.1章  離散聯合分布 (2.3.1 Discrete Joint Distributions)
如果隨機變數都是離散的，那麼其聯合機率分布可以被表示成表格(table)，類似下方的表2.1。這個表格，列出所有隨機變數(X、Y、Z)有可能發生的值，所有可能的情況都被包含在這個表格內，其中最右邊的一個欄位列出所有可能相對應的機率值。在這個例子中，三個變數(X、Y、Z)的值有可能是 0 或者 1，每個隨機變數都只有兩種可能的狀態，因此總共會有2^3=8種可能的結果。
由於這樣的表格已經羅列出所有可能，因此若加總最右側欄位的所有機率值，其總和必須等於一。也因為有這個基本的統計公理存在，因此我們只需要七個參數()來描述這個表格的機率值，換句話說，因為根據這個統計公理，所有機率值總和必須為一，因此第八個機率值必定為 1-(其他七個機率值的總和)。
同理可證，當我們有n 個二元隨機變數(僅有零或一兩種狀態)，我們需要(2^n - 1)個參數來描述所有事件的機率值(也可以說是，描述整個聯合機率分布)。
由此可見，聯合機率分布的參數量與變數的數目呈現冪函數關係。實務上，這有時造成聯合機率分布在儲存時遭遇記憶體問題。
某些特定的情況下，問題允許我們可以將其中的隨機變數視作獨立變數(independent)，換句話說，任何一個變數無法提供任何訊息(線索、資訊)讓我們判斷另一個變數可能的值。也可以理解成，任何一個變數的機率分布，都和另一個變數的值無關。
例: 若變數X及Y戶為獨立變數(independent)，那麼在整個X、Y變數的值域裡，其聯合機率分布可以表示成: P(X,Y)=P(X)P(Y)
(譯: 其聯合機率分布，就只是兩個變數的機率分布相乘，X的機率分布只和X自己有關，Y處在任何的值都不會改變X的機率分布，反之亦然。)
同理可證，推廣到n個變數(X1、X2、X3.....Xn)，若這n個變數彼此都獨立，則此n個變數的聯合機率分布為: P(X1:n)=∏i P(xi). <br>
獨立(independent)變數的特性，使我們可以用n個參數形容n個變數的聯合機率分布，而非用(2^n-1)個參數。只有在變數彼此之間具有關聯性而不互相獨立，我們才需要使用到2^n-1 個參數來描述聯合機率分布。
獨立性可以為我們的問題帶來驚人的簡化，但在處理實務問題時，我們必須很小心這個假設，因為它往往是錯的。


```julia
struct Variable
     name::Symbol
     m::Int # number of possible values
end

const Assignment = Dict{Symbol,Int}
const FactorTable = Dict{Assignment,Float64}

struct Factor
     vars::Vector{Variable}
      table::FactorTable
end

variablenames(ϕ::Factor) = [var.name for var in ϕ.vars]
select(a::Assignment, varnames::Vector{Symbol}) = Assignment(n=>a[n] for n in varnames)

function assignments(vars::AbstractVector{Variable})
        names = [var.name for var in vars]
        return vec([Assignment(n=>v for (n,v) in zip(names, values)) for values in product((1:v.m for v in vars)...)])
end
         
function normalize!(ϕ::Factor)
        z = sum(p for (a,p) in ϕ.table)
           for (a,p) in ϕ.table
              ϕ.table[a] = p/z
           end
   return ϕ
end
```
